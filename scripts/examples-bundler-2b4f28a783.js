angular.module("deformExamples",["angularDeforms","validator","validator.rules"]).run(["$builder",function(e){return e.registerComponent("name",{group:"Default",label:"User",icon:"glyphicon glyphicon-user",required:!1,arrayToText:!0,showcaseTemplate:"<i class='{{icon}}'></i><span>{{label}}</span>",template:"<div class='form-group'><label for='{{formName+index}}' class='col-md-4 control-label' ng-class='{'fb-required':required}'>{{label}}</label><div class='col-md-8'><input type='hidden' ng-model='inputText' validator-required='{{required}}' validator-group='{{formName}}'/><div class='col-sm-6' style='padding-left: 0;'><input type='text' ng-model='inputArray[0]' class='form-control' id='{{formName+index}}-0'/><p class='help-block'>First name</p></div><div class='col-sm-6' style='padding-left: 0;'><input type='text' ng-model='inputArray[1]' class='form-control' id='{{formName+index}}-1'/><p class='help-block'>Last name</p></div></div></div>",popoverTemplate:"<form><div class='form-group'><label class='control-label'>Label</label><input type='text' ng-model='label' validator='[required]' class='form-control'/></div><div class='checkbox'><label><input type='checkbox' ng-model='required' />Required</label></div><hr/><div class='form-group'><input type='submit' ng-click='duplicate()' class='btn btn-primary' value='Save'/><input type='button' ng-click='cancel()' class='btn btn-default' value='Cancel'/><input type='button' ng-click='remove()' class='btn btn-danger' value='Delete'/></div></form>"})}]).config(["$validatorProvider",function(e){e.register("maxPointsInOption",{validator:function(e,t,o,n,l){return values=t.$parent.options.map(function(e){return e.value}),max=Math.max.apply(null,values),max>=100},error:"Al menos una opción debe tener el 100% de los puntos"}),e.register("totalPoints",{invoke:"submit",validator:function(e,t,o,n,l){return values=t.$parent.options.map(function(e){return e.value}),total=values.reduce(function(e,t){return e+t}),total>=100},error:"La suma de los porcentajes de las alternativas debe ser a lo menos del 100%"})}]).controller("DemoController",["$scope","$builder",function(e,t){e.$on(t.broadcastChannel.selectInput,function(){$('a[data-target="#options"]').tab("show")})}]),function(e){function t(n){if(o[n])return o[n].exports;var l=o[n]={exports:{},id:n,loaded:!1};return e[n].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";var n=o(1),l=o(2),r=o(3),a=o(4),i=o(5);angular.module("angularDeforms",["ngAnimate","validator.rules","builderDirective","builderComponents","builderProvider"]),angular.module("builder",["builderDirective"]),angular.module("builderProvider",[]).provider("$builder",[n.BuilderProvider]),angular.module("builderComponents",["builder","validator.rules"]).config(["$logProvider","$builderProvider",i.ConfigBuilder]),angular.module("builderController",["builderProvider"]).controller("dfBuilderController",[r.DfBuilderController]).controller("dfFormObjectEditableController",["$scope","$injector","$log",r.DfFormObjectEditableController]).controller("dfComponentsController",["$scope","$injector",r.DfComponentsController]).controller("dfFormObjectController",["$scope","$injector",r.DfFormObjectController]).controller("dfComponentController",["$scope","$injector",r.DfComponentController]).controller("dfFormController",["$scope","$injector",r.DfFormController]).controller("dfDragpagesController",[r.DfDragpagesController]),angular.module("builderDrag",[]).provider("$drag",[l.DragProvider]),angular.module("builderDirective",["builderProvider","builderController","builderDrag","validator"]).directive("dfBuilder",["$injector",a.DfBuilder]).directive("dfFormObjectEditable",["$injector",a.DfFormObjectEditable]).directive("dfObjectEditable",["$injector",a.DfObjectEditable]).directive("dfComponent",["$injector",a.DfComponent]).directive("dfComponents",[a.DfComponents]).directive("dfForm",["$injector",a.DfForm]).directive("dfFormObject",["$injector",a.DfFormObject]).directive("dfPageEditable",["$injector",a.DfPageEditable]).directive("dfDragpages",["$injector",a.DfDragpages]).directive("contenteditable",["$injector",a.Contenteditable])},function(e,t){"use strict";function o(){var e=this,t=null,o=null,l=null,r=null;this.components={},this.groups=[],this.forms={"default":[]},this.pages=[],this.dependencies=[],this.broadcastChannel={selectInput:"$selectInput",updateInput:"$updateInput",saveInput:"$saveInput"};var a={formObject:null,formObjectScope:null,formObjectElement:null,formName:null,page:null,form:this.forms["default"]},i="_"+Math.random().toString(36).substr(2,9),c=Math.floor(1e5*Math.random());this.generateKey=function(){return c++,""+i+Date.now()+c},this.convertComponent=function(e,t){var o=void 0,n={name:e,group:null!=(o=t.group)?o:"Default",label:null!=(o=t.label)?o:"",description:null!=(o=t.description)?o:"",placeholder:null!=(o=t.placeholder)?o:"",editable:null!=(o=t.editable)?o:!0,required:null!=(o=t.required)?o:!1,validation:null!=(o=t.validation)?o:"/.*/",validationOptions:null!=(o=t.validationOptions)?o:[],complexValues:null!=(o=t.complexValues)?o:[],options:null!=(o=t.options)?o:[],multipeChoice:null!=(o=t.multipeChoice)?o:!1,display:null!=(o=t.display)?o:!0,dependentFrom:null!=(o=t.dependentFrom)?o:{},template:t.template,templateUrl:t.templateUrl,showcaseTemplate:t.showcaseTemplate,icon:t.icon,popoverTemplate:t.popoverTemplate,popoverTemplateUrl:t.popoverTemplateUrl};return n.template||n.templateUrl||l.error("The template is empty."),n.popoverTemplate||n.popoverTemplateUrl||l.error("The popoverTemplate is empty."),n},this.convertFormObject=function(t,o){o=o||{};var n=void 0,l=e.components[o.component];if(null==l)throw"The component "+o.component+" was not registered.";var r={id:o.id,key:null!=(n=o.key)?n:e.generateKey(),component:o.component,editable:null!=(n=o.editable)?n:l.editable,label:null!=(n=o.label)?n:l.label,description:null!=(n=o.description)?n:l.description,placeholder:null!=(n=o.placeholder)?n:l.placeholder,options:null!=(n=o.options)?n:l.options,required:null!=(n=o.required)?n:l.required,validation:null!=(n=o.validation)?n:l.validation,display:null!=(n=o.display)?n:l.display,dependentFrom:null!=(n=o.dependentFrom)?n:l.dependentFrom,complexValues:null!=(n=o.complexValues)?n:l.complexValues};return r},this.reindexFormObject=function(t){var o,n,l,r;for(o=e.forms[t],l=n=0,r=o.length;r>n;l=n+=1)o[l].index=l},this.setupProviders=function(e){t=e,o=t.get("$http"),r=t.get("$templateCache"),l=t.get("$log")},this.loadTemplate=function(e){null==e.template&&o.get(e.templateUrl,{cache:r}).success(function(t){e.template=t}),null==e.popoverTemplate&&o.get(e.popoverTemplateUrl,{cache:r}).success(function(t){e.popoverTemplate=t})},this.copyObjectToScope=function(e,t){var o,n;for(o in e)n=e[o],"$$hashKey"!==o&&(t[o]=n)},this.registerComponent=function(o,l){if(null==l&&(l={}),null==e.components[o]){var r=e.convertComponent(o,l);e.components[o]=r,null!=t&&e.loadTemplate(r),r.group,n.call(e.groups,r.group)<0&&e.groups.push(r.group)}},this.addFormObject=function(t,o){null==o&&(o={});var n=void 0;return null==(n=e.forms)[t]&&(n[t]=[]),e.insertFormObject(t,e.forms[t].length,o)},this.getCurrentFormObject=function(){return a.formObject},this.selectCurrentFormObject=function(t,o,n,l){a.formName=t,a.form=e.forms[t],a.formObject=angular.copy(o),a.formObjectScope=l,a.formObjectElement&&a.formObjectElement.removeClass("active"),a.formObjectElement=n,a.formObjectElement.addClass("active")},this.updateFormObjectScope=function(t,o){o=o||a.formObjectScope,e.copyObjectToScope(t,o)},this.addForm=function(t){return e.forms[t]||(e.forms[t]=[]),e.forms[t]},this.getCurrentPage=function(){return a.page},this.selectCurrentPage=function(t){return a.page=e.pages[t]},this.addPage=function(){var t=e.pages.length,o={title:"Page "+(t+1),description:"Description number "+(t+1),index:t,formName:"form"+t,form:{name:"form"+t,content:e.addForm("form"+t)}};return e.pages.push(o),e.selectCurrentPage(t),o},this.insertFormObject=function(t,o,n){null==n&&(n={});var l=void 0;return null==(l=e.forms)[t]&&(l[t]=[]),o>e.forms[t].length?o=e.forms[t].length:0>o&&(o=0),e.forms[t].splice(o,0,e.convertFormObject(t,n)),e.reindexFormObject(t),e.forms[t][o]},this.removeFormObject=function(t,o){t=t||a.formName,o=o||a.formObject.index;var n=e.forms[t];return n.splice(o,1),n.length||a.page&&a.page.form.name==a.formName&&(a.formObject=void 0),e.reindexFormObject(t)},this.duplicateFormObject=function(t,o){t=t||a.formName,o=o||a.formObject;var n=o.index,l=e.forms[t];return l.splice(n,0,angular.copy(o)),e.reindexFormObject(t)},this.updateFormObjectIndex=function(t,o,n){if(o!=n){var l=e.forms[t],r=l.splice(o,1)[0];return l.splice(n,0,r),e.reindexFormObject(t)}},this.addAnswerDependency=function(t,o,n){e.removeAnswerDependency(t),t.display=!1,e.dependencies.push({formObjectTargetKey:t.key,formObjectKey:o,formAnswerKey:n})},this.removeAnswerDependency=function(t){var o=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];t.display=!0,e.dependencies.forEach(function(n,l){n.formObjectTargetKey==t.key&&(e.dependencies.splice(l,1),o&&(t.dependentFrom={}))})},this.findDependencyTargets=function(t){return e.dependencies.filter(function(e){return e.formObjectKey==t}).map(function(t){return e.findFormObjectByKey(t.formObjectTargetKey)})},this.findFormObjectByKey=function(t){var o=Object.keys(e.forms).reduce(function(t,o){return t=t.concat(e.forms[o])},[]).filter(function(e){return e.key==t})[0];return o||!1},this.$get=["$injector",function(e){this.setupProviders(e);var t=this.components;for(var o in t){var n=t[o];this.loadTemplate(n)}return{config:this.config,components:this.components,groups:this.groups,forms:this.forms,pages:this.pages,dependencies:this.dependencies,addPage:this.addPage,getCurrentPage:this.getCurrentPage,selectCurrentPage:this.selectCurrentPage,addForm:this.addForm,getCurrentFormObject:this.getCurrentFormObject,selectCurrentFormObject:this.selectCurrentFormObject,updateFormObjectScope:this.updateFormObjectScope,addFormObject:this.addFormObject,insertFormObject:this.insertFormObject,removeFormObject:this.removeFormObject,duplicateFormObject:this.duplicateFormObject,updateFormObjectIndex:this.updateFormObjectIndex,addAnswerDependency:this.addAnswerDependency,removeAnswerDependency:this.removeAnswerDependency,findDependencyTargets:this.findDependencyTargets,findFormObjectByKey:this.findFormObjectByKey,broadcastChannel:this.broadcastChannel,registerComponent:this.registerComponent,copyObjectToScope:this.copyObjectToScope,generateKey:this.generateKey}}]}Object.defineProperty(t,"__esModule",{value:!0}),t.BuilderProvider=o;var n=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1}},function(e,t){"use strict";function o(){var e,t=this,o=null,n=null;this.data={draggables:{},droppables:{}};var l=this;this.mouseMoved=!1,this.isMouseMoved=function(){return l.mouseMoved},this.hooks={down:{},move:{},up:{}},this.eventMouseMove=function(){},this.eventMouseUp=function(){},$(function(){$(document).on("mousedown",function(e){l.mouseMoved=!1,angular.forEach(l.hooks.down,function(t){return t(e)})}),$(document).on("mousemove",function(e){l.mouseMoved=!0,angular.forEach(l.hooks.move,function(t){return t(e)})}),$(document).on("mouseup",function(e){angular.forEach(l.hooks.up,function(t){return t(e)})})}),this.currentId=0,this.getNewId=function(){return String(l.currentId++)},this.setupEasing=function(){jQuery.extend(jQuery.easing,{easeOutQuad:function(e,t,o,n,l){return-n*(t/=l)*(t-2)+o}})},this.setupProviders=function(t){e=t,o=e.get("$rootScope"),n=e.get("$timeout")},this.isHover=function(e,t){var o=e.offset(),n=t.offset(),l={width:e.width(),height:e.height()},r={width:t.width(),height:t.height()},a={x:!1,y:!1};return a.x=o.left>n.left&&o.left<n.left+r.width,a.x=a.x||o.left+l.width>n.left&&o.left+l.width<n.left+r.width,a?(a.y=o.top>n.top&&o.top<n.top+r.height,a.y=a.y||o.top+l.height>n.top&&o.top+l.height<n.top+r.height,a.x&&a.y):!1};var r=function(e,t){n(function(){return t()},e)};this.autoScroll={up:!1,down:!1,scrolling:!1,scroll:function(){l.autoScroll.scrolling=!0,l.autoScroll.up?($("html, body").dequeue().animate({scrollTop:$(window).scrollTop()-50},100,"easeOutQuad"),r(100,function(){l.autoScroll.scroll()})):l.autoScroll.down?($("html, body").dequeue().animate({scrollTop:$(window).scrollTop()+50},100,"easeOutQuad"),r(100,function(){l.autoScroll.scroll()})):l.autoScroll.scrolling=!1},start:function(e){e.clientY<50?(l.autoScroll.up=!0,l.autoScroll.down=!1,l.autoScroll.scrolling||l.autoScroll.scroll()):e.clientY>$(window).innerHeight()-50?(l.autoScroll.up=!1,l.autoScroll.down=!0,l.autoScroll.scrolling||l.autoScroll.scroll()):(l.autoScroll.up=!1,l.autoScroll.down=!1)},stop:function(){l.autoScroll.up=!1,l.autoScroll.down=!1}},this.dragMirrorMode=function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],o=arguments[2],n={id:l.getNewId(),mode:"mirror",maternal:e[0],element:null,object:o};return e.on("mousedown",function(o){o.preventDefault();var r=e.clone();n.element=r[0],r.addClass("df-draggable form-horizontal prepare-dragging"),l.hooks.move.drag=function(t,o){if(!r.hasClass("prepare-dragging")||(r.css({width:e.width(),height:e.height()}),r.removeClass("prepare-dragging"),r.addClass("dragging"),!o)){r.offset({left:t.pageX-r.width()/2,top:t.pageY-r.height()/2}),l.autoScroll.start(t);var a=[];return angular.forEach(l.data.droppables,function(e){l.isHover(r,$(e.element))?a.push(e.move(t,n)):a.push(e.out(t,n))}),a}},l.hooks.up.drag=function(e){angular.forEach(l.data.droppables,function(t){t.up(e,l.isHover(r,$(t.element)),n)}),delete l.hooks.move.drag,delete l.hooks.up.drag,n.element=null,r.remove(),l.autoScroll.stop()},$("body").append(r),t||l.hooks.move.drag(o,t)}),n},this.dragDragMode=function(e){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],o=arguments[2],n={id:l.getNewId(),mode:"drag",maternal:null,element:e[0],object:o};return e.addClass("df-draggable"),e.on("mousedown",function(o){o.preventDefault(),e.hasClass("dragging")||(e.addClass("prepare-dragging"),l.hooks.move.drag=function(t,o){e.hasClass("prepare-dragging")&&(e.css({width:e.width(),height:e.height()}),e.removeClass("prepare-dragging"),e.addClass("dragging"),o)||(e.offset({left:t.pageX-e.width()/2,top:t.pageY-e.height()/2}),l.autoScroll.start(t),angular.forEach(l.data.droppables,function(o){l.isHover(e,$(o.element))?o.move(t,n):o.out(t,n)}))},l.hooks.up.drag=function(t){angular.forEach(l.data.droppables,function(o){o.up(t,l.isHover(e,$(o.element)),n)}),delete l.hooks.move.drag,delete l.hooks.up.drag,e.css({width:"",height:"",left:"",top:""}),e.removeClass("dragging defer-dragging"),l.autoScroll.stop()},t||l.hooks.move.drag(o,t))}),n},this.dropMode=function(e,t){return{id:l.getNewId(),element:e[0],move:function(e,n){o.$apply(function(){angular.isFunction(t.move)?t.move(e,n):void 0})},up:function(e,n,l){o.$apply(function(){angular.isFunction(t.up)?t.up(e,n,l):void 0})},out:function(e,n){o.$apply(function(){angular.isFunction(t.out)?t.out(e,n):void 0})}}},this.draggable=function(e){var t,o,n,r,a,i,c,d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(c=[],"mirror"==d.mode)for(n=0,a=e.length;a>n;n++)o=e[n],t=l.dragMirrorMode($(o),d.defer,d.object),c.push(t.id),l.data.draggables[t.id]=t;else for(r=0,i=e.length;i>r;r++)o=e[r],t=l.dragDragMode($(o),d.defer,d.object),c.push(t.id),l.data.draggables[t.id]=t;return c},this.droppable=function(e){var t,o,n,r,a,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];for(a=[],n=0,r=e.length;r>n;n++)o=e[n],t=l.dropMode($(o),i),a.push(t),l.data.droppables[t.id]=t;return a},this.get=function(e){return t.setupEasing(),t.setupProviders(e),{isMouseMoved:t.isMouseMoved,data:t.data,draggable:t.draggable,droppable:t.droppable}},this.get.$inject=["$injector"],this.$get=this.get}Object.defineProperty(t,"__esModule",{value:!0}),t.DragProvider=o},function(e,t){"use strict";function o(){}function n(e,t,o){var n=t.get("$builder"),l=t.get("$validator");e.setupScope=function(t){n.copyObjectToScope(t,e),e.optionsText="",angular.forEach(t.options,function(t){e.optionsText+=t.text+"\n"}),e.activatorsFormObjects=n.pages.reduce(function(t,o){return t=t.concat(o.form.content.map(function(t){return n.getCurrentPage().index<o.index||n.getCurrentPage().index==o.index&&e.index<=t.index?void 0:(t.page=o.title+" (page "+(o.index+1)+")",t)}))},[]).filter(function(e){return e?"radio"==e.component||"select"==e.component:void 0}),e.$watch("[label, description, placeholder, required, options, validation, display, dependentFrom]",function(){t.label=e.label,t.description=e.description,t.placeholder=e.placeholder,t.required=e.required,t.options=e.options,t.validation=e.validation,t.display=e.display,t.dependentFrom=e.dependentFrom},!0),e.$watch("optionsText",function(t){t&&""!=t&&(e.options=t.split("\n").reduce(function(t,o,l){if(o.length<=0)return t;var r=e.options[l]||{};return r.text=o,r.key||(r.key=n.generateKey()),r.value||(r.value=0),t.push(r),t},[]))}),e.$watch('dependentFrom["active"]',function(t){0==t&&n.removeAnswerDependency(e,!0)}),e.$watch('dependentFrom["formObjectKey"]',function(t){if(t&&""!=t){var o=n.findFormObjectByKey(t);o?e.dependencyOptions=o.options:e.dependencyOptions=[]}}),e.$watch('dependentFrom["formAnswerKey"]',function(t){if(t&&""!=t){var o=e.dependentFrom.formObjectKey;n.addAnswerDependency(e,o,t)}else n.removeAnswerDependency(e)}),e.validationOptions=n.components[t.component].validationOptions,e.colapseDependency=e.dependentFrom.active},e.duplicate=function(t){n.duplicateFormObject(e.$parent.formName,t)},e.remove=function(t,o){o&&o.stopPropagation(),n.removeFormObject(e.$parent.formName,t)},e.submitPoints=function(){var t=l.validate(e,"options");e.validator=l,t.success(function(){o.info("success")}),t.error(function(){o.error(e.validator.broadcastChannel)}),t.then(function(){o.info("then")})}}function l(e,t){var o=t.get("$builder");e.groupedComponents={},angular.forEach(o.components,function(t){angular.isUndefined(e.groupedComponents[t.group])&&(e.groupedComponents[t.group]=[]),e.groupedComponents[t.group].push(t)})}function r(e,t){var o=t.get("$builder");e.copyObjectToScope=function(t){return o.copyObjectToScope(t,e)}}function a(e,t){var o=t.get("$builder"),n=t.get("$timeout");null==e.input&&(e.input=[]),e.$watch("form",function(){e.input.length>e.form.length&&e.input.splice(e.form.length),n(function(){e.$broadcast(o.broadcastChannel.updateInput)})},!0)}function i(e,t){var o=t.get("$builder");e.copyObjectToScope=function(t){return o.copyObjectToScope(t,e)},e.updateInput=function(t){var o={id:e.formObject.id,label:e.formObject.label,value:null!=t?t:""};e.$parent.input.splice(e.$index,1,o)},e.findSelectedOption=function(e,t){var o=e.filter(function(e){return e.key==t})[0];return o||!1}}function c(){}Object.defineProperty(t,"__esModule",{value:!0}),t.DfBuilderController=o,t.DfFormObjectEditableController=n,t.DfComponentsController=l,t.DfComponentController=r,t.DfFormController=a,t.DfFormObjectController=i,t.DfDragpagesController=c},function(e,t){"use strict";function o(e){var t=e.get("$builder"),o=e.get("$drag"),n={restrict:"A",controller:"dfBuilderController",templateUrl:"app/components/builder/templates/df-builder.directive.html",link:function(e,n,l){var r=!0;e.formName=l.dfBuilder,e.formObjects=t.addForm(e.formName),e.builder=t,$(n).addClass("df-builder"),o.droppable($(n),{move:function(e){r&&($("div.df-form-object-editable").popover("hide"),r=!1);var t=$(n).find(".df-form-object-editable:not(.empty,.dragging)");if(0===t.length)return void(0===$(n).find(".df-form-object-editable.empty").length&&$(n).find(">div:first").append($("<div class='df-form-object-editable empty'></div>")));var o=[];o.push(-1e3),Array.from(t).forEach(function(e){var t=$(e),n=t.offset(),l=t.height();o.push(n.top+l/2)}),o.push(o[o.length-1]+1e3);for(var l=0;l<o.length;l++)if(e.pageY>o[l]&&e.pageY<=o[l+1]){$(n).find(".empty").remove();var a=$("<div class='df-form-object-editable empty'></div>");l<t.length?a.insertBefore($(t[l])):a.insertAfter($(t[l-1]));break}},out:function(){r&&($("div.df-form-object-editable").popover("hide"),r=!1),$(n).find(".empty").remove()},up:function(a,i,c){if(r=!0,!o.isMouseMoved())return void $(n).find(".empty").remove();if(i||"drag"!==c.mode){if(i&&("mirror"===c.mode&&t.insertFormObject(e.formName,$(n).find(".empty").index(".df-form-object-editable"),{component:c.object.componentName}),"drag"===c.mode)){var d;!function(){var o=c.object.formObject.index,l=$(n).find(".empty").index(".df-form-object-editable");l>o&&l--;var r=!1,a=c.object.formObject,i=a.key,s=t.findDependencyTargets(i),p=s.filter(function(e){return e.index<=l});p.length&&(r=!0);var u=!1;if(a.dependentFrom.active){var m=a.dependentFrom.formObjectKey,f=t.findFormObjectByKey(m);f.index>=l&&(u=!0)}var b=!1;(r||u)&&(d=confirm("This change will break one or more dependencies\nDo you want to continue?"),1==d?(u&&(s=s.concat([a])),s.forEach(function(e){t.removeAnswerDependency(e)})):b=!0),b||t.updateFormObjectIndex(e.formName,o,l)}()}}else{var s=c.object.formObject;s.editable&&t.removeFormObject(l.dfBuilder,s.index)}$(n).find(".empty").remove()}})}};return n}function n(e){var t=e.get("$builder"),o=e.get("$drag"),n=e.get("$compile"),l=e.get("$timeout"),r={restrict:"A",controller:"dfFormObjectEditableController",require:"^dfBuilder",scope:{formObject:"=dfFormObjectEditable"},link:function(e,r){e.inputArray=[],e.builder=t,e.$component=t.components[e.formObject.component],e.setupScope(e.formObject),e.$watch("$component.template",function(t){if(t){t="<div><div class=\"df-remove-btn\" ng-click='remove(formObject, $event)'>\n                      <i class='glyphicon glyphicon-remove'></i></div>"+t+"\n                    </div>";var o=n(t)(e);r.html(o)}}),r.bind("click",function(o){o.preventDefault(),e.$apply(function(){l(function(){e.$emit(t.broadcastChannel.selectInput);var o=e.$parent.formName,n=e.formObject;t.selectCurrentFormObject(o,n,r,e)})})}),o.draggable($(r),{object:{formObject:e.formObject}}),!e.formObject.editable}};return r}function l(e){var t=e.get("$builder"),o=e.get("$compile"),n=e.get("$animate"),l={restrict:"A",controller:"dfFormObjectEditableController",templateUrl:"app/components/builder/templates/df-object-editable.directive.html",link:function(e,l,r){e.builder=t,e.formName=r.dfObjectEditable,e.showForm=!0,e.$watch("builder.getCurrentFormObject()",function(r){r&&!function(){e.setupScope(r);var a=t.components[r.component],i=o(a.popoverTemplate)(e),c=l.children(".df-o-editable").children();c.html(i),c.addClass("df-o-editable-out"),n.addClass(c,"df-o-editable-in").then(function(){n.removeClass(c,"df-o-editable-out"),n.removeClass(c,"df-o-editable-in")})}()}),e.$watch("builder.getCurrentFormObject()",function(e){e&&t.updateFormObjectScope(e)},!0)}};return l}function r(){var e={restrict:"A",templateUrl:"app/components/builder/templates/df-components.directive.html",controller:"dfComponentsController"};return e}function a(e){var t=e.get("$drag"),o=e.get("$compile"),n={restrict:"A",scope:{component:"=dfComponent"},controller:"dfComponentController",link:function(e,n){e.copyObjectToScope(e.component),t.draggable($(n),{mode:"mirror",defer:!1,object:{componentName:e.component.name}}),e.$watch("component.showcaseTemplate",function(t){if(t){var l=o(t)(e);n.html(l)}})}};return n}function i(e){var t=e.get("$builder"),o={restrict:"A",require:"ngModel",scope:{formName:"@dfForm",input:"=ngModel","default":"=dfDefault"},template:'<div class="df-form-object" ng-repeat="object in form" df-form-object="object"></div>',controller:"dfFormController",link:function(o){t=e.get("$builder"),t.forms[o.formName]=t.forms[o.formName]||[],o.form=t.forms[o.formName]}};return o}function c(e){var t=e.get("$builder"),o=e.get("$compile"),n=e.get("$parse"),l={restrict:"A",controller:"dfFormObjectController",link:function(e,l,r){function a(){var t=[];e.inputArray.forEach(function(o){var n=e.findSelectedOption(e.options,o);n&&t.push(n)}),e.updateInput(t)}function i(){var t=e.formObject.options;if(t.length>0){var o=e.findSelectedOption(t,e.inputText);e.updateInput(o)}else e.updateInput(e.inputText)}e.formObject=n(r.dfFormObject)(e),e.$component=t.components[e.formObject.component],e.$on(t.broadcastChannel.updateInput,function(){e.$component.multipeChoice?a():i()}),e.$component.multipeChoice&&(e.inputArray=[],e.$watch("inputArray",function(e,t){e!==t&&a()},!0)),e.$watch("inputText",function(){i()}),e.$watch(r.dfFormObject,function(){e.copyObjectToScope(e.formObject)},!0),e.$watch("$component.template",function(t){if(t){var n=$(t),r=o(n)(e),a=n.find("[ng-model='inputText']");return a.attr({validator:"{{validation}}"}),$(l).html(r)}}),!e.$component.multipeChoice&&e.formObject.options.length>0&&(e.inputText=e.formObject.options[0].key)}};return l}function d(e){var t=e.get("$builder"),o={restrict:"A",templateUrl:"app/components/builder/templates/df-page-editable.directive.html",link:function(e){e.builer=t,e.pages=t.pages,e.currentPage=t.getCurrentPage(),e.$watch("builer.getCurrentPage()",function(o){o&&(e.currentPage=t.getCurrentPage())}),e.addNewPage=function(){t.addPage()},e.removePage=function(){alert(1)}}};return o}function s(e){var t=e.get("$builder"),o={restrict:"A",templateUrl:"app/components/builder/templates/df-dragpages.directive.html",controller:"dfDragpagesController",link:function(e){e.forms=t.forms,e.pages=t.pages,e.builder=t,e.changePage=function(e){t.selectCurrentPage(e)},t.addPage()}};return o}function p(e){var t=e.get("$timeout");return{require:"^?ngModel",replace:!0,link:function(e,o,n,l){o.on("keyup",function(){e.$apply(function(){l.$setViewValue(o.html())})}),l.$render=function(){o.html(l.$viewValue)},t(function(){l.$setViewValue(o.html())})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.DfBuilder=o,t.DfFormObjectEditable=n,t.DfObjectEditable=l,t.DfComponents=r,t.DfComponent=a,t.DfForm=i,t.DfFormObject=c,t.DfPageEditable=d,t.DfDragpages=s,t.Contenteditable=p},function(e,t){"use strict";function o(e,t){"ngInject";e.debugEnabled(!0),t.registerComponent("textInput",{group:"Default",label:"Text Input",description:"description",placeholder:"placeholder",icon:"glyphicon glyphicon-font",required:!1,validationOptions:[{label:"none",rule:"/.*/"},{label:"number",rule:"[number]"},{label:"email",rule:"[email]"},{label:"url",rule:"[url]"}],showcaseTemplate:"<i class='{{icon}}'></i> <span>{{label}}</span>",templateUrl:"app/components/builder/templates/form_objects/textInput.html",popoverTemplateUrl:"app/components/builder/templates/editable_components/textInput.html"}),t.registerComponent("textArea",{group:"Default",label:"Text Area",description:"description",placeholder:"placeholder",icon:"glyphicon glyphicon-text-width",required:!1,showcaseTemplate:"<i class='{{icon}}'></i> <span>{{label}}</span>",templateUrl:"app/components/builder/templates/form_objects/textArea.html",popoverTemplateUrl:"app/components/builder/templates/editable_components/textArea.html"}),t.registerComponent("checkbox",{group:"Default",label:"Checkbox",description:"description",placeholder:"placeholder",icon:"glyphicon glyphicon-ok",required:!1,complexValues:!0,options:[{text:"Value one"},{text:"Value two"}],multipeChoice:!0,showcaseTemplate:"<i class='{{icon}}'></i> <span>{{label}}</span>",template:'<div class="form-group">\n    <label for="{{formName+index}}" class="col-sm-4 control-label" ng-class="{\'df-required\':required}">{{label}}</label>\n    <div class="col-sm-8">\n        <input type=\'hidden\' ng-model="inputText" validator-required="{{required}}" validator-group="{{formName}}"/>\n        <div class=\'checkbox\' ng-repeat="item in options track by $index">\n            <label><input type=\'checkbox\' ng-model="$parent.inputArray[$index]" ng-true-value="\'{{item.key}}\'" ng-false-value="false" />\n                {{item.text}}\n            </label>\n        </div>\n        <p class=\'help-block\'>{{description}}</p>\n    </div>\n</div>',popoverTemplateUrl:"app/components/builder/templates/editable_components/checkbox.html"}),t.registerComponent("radio",{group:"Default",label:"Radio",description:"description",placeholder:"placeholder",icon:"glyphicon glyphicon-list",required:!1,complexValues:!0,options:[{text:"Value one"},{text:"Value two"}],showcaseTemplate:"<i class='{{icon}}'></i> <span>{{label}}</span>",templateUrl:"app/components/builder/templates/form_objects/radio.html",popoverTemplateUrl:"app/components/builder/templates/editable_components/radio.html"}),t.registerComponent("select",{group:"Default",label:"Select",description:"description",placeholder:"placeholder",icon:"glyphicon glyphicon-th-list",required:!1,complexValues:!0,options:[{text:"Value one"},{text:"Value two"}],showcaseTemplate:"<i class='{{icon}}'></i> <span>{{label}}</span>",templateUrl:"app/components/builder/templates/form_objects/select.html",popoverTemplateUrl:"app/components/builder/templates/editable_components/select.html"})}o.$inject=["$logProvider","$builderProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigBuilder=o}]),angular.module("builder").run(["$templateCache",function(e){e.put("app/components/builder/templates/df-builder.directive.html",'<div class="form-horizontal df-drag-container"><div class=df-form-object-editable ng-repeat="object in formObjects" df-form-object-editable=object></div></div>'),e.put("app/components/builder/templates/df-components.directive.html",'<div class=df-shared><div class=row><div class="col-md-12 col-sm-12"><!-- start accordeon --><div class="df-accordeon panel-group" id=accordion role=tablist aria-multiselectable=true><div class="panel sidebar_section" ng-repeat="(group, components) in groupedComponents track by $index"><div class=panel-heading role=tab id=heading{{$index}}><h4 class=panel-title><a role=button data-toggle=collapse data-target=#collapse{{$index}}>{{group}}</a></h4></div><div id=collapse{{$index}} class="panel-collapse collapse in" role=tabpanel aria-labelledby=heading{{$index}}><div class=panel-body><div class=row><ul><li ng-repeat="component in components" df-component=component></li></ul></div></div></div></div></div><!-- end accordeon --></div></div></div>'),e.put("app/components/builder/templates/df-dragpages.directive.html",'<div class=tabbable-panel><div class="tabbable-line tabs-below"><div class=tab-content><div class="tab-pane fade row" ng-class="{ \'active in\' : builder.getCurrentPage().index == $index }" ng-repeat="page in pages" id=page_{{$index}}><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 bhoechie-tab-container dragzone-tab-container"><h3 class=df-title-form contenteditable=true ng-model=page.title></h3><h5 class=df-title-form contenteditable=true ng-model=page.description></h5><hr><div df-builder={{page.form.name}}></div></div></div></div><div class="action-buttons well width-80"><ul class="nav nav-tabs"><li ng-class="{ \'active\': builder.getCurrentPage().index == $index }" ng-repeat="page in pages" ng-click=changePage($index)><a data-target=page_{{$index}} data-toggle=tab aria-controls=page_{{$index}}>Página {{$index + 1}}</a></li></ul></div></div></div>'),e.put("app/components/builder/templates/df-object-editable.directive.html",'<div class=df-o-editable ng-if=builder.getCurrentFormObject()><div></div></div><div class="alert alert-info" role=alert ng-if=!builder.getCurrentFormObject()>Select a component to see their properties</div>'),e.put("app/components/builder/templates/df-page-editable.directive.html",'<p class=help><a href="" class="btn btn-primary" ng-click=addNewPage() data-toggle=tooltip data-placement=bottom title="New page"><i class="glyphicon glyphicon-plus"></i></a> <a href="" class="btn btn-danger" ng-click=removePage() data-toggle=tooltip data-placement=bottom title="New page"><i class="glyphicon glyphicon-remove"></i></a></p><br><div class=row><div class="col-md-12 col-sm-12"><div class=form-group><label>Title</label><input type=text class=form-control placeholder=Title ng-model=currentPage.title></div><div class=form-group><label>Description</label><textarea rows=4 cols=40 class=form-control placeholder=Description ng-model=currentPage.description></textarea><p class=help-block>Optional</p></div></div></div>{{builder.dependencies}}'),
e.put("app/components/builder/templates/editable_components/checkbox.html",'<form><div class=form-group><label class=control-label>Label</label><input type=text ng-model=label validator=[required] class=form-control></div><div class=form-group><label class=control-label>Description</label><input type=text ng-model=description class=form-control></div><div class=form-group><label class=control-label>Options</label><textarea class=form-control rows=3 ng-model=optionsText>\n  </div>\n  <div class=checkbox>\n    <label>\n      <input type=checkbox ng-model=required>Required\n    </label>\n  </div>\n  <hr>\n  <div class="df-accordeon panel-group" id=accordion role=tablist aria-multiselectable=true>\n    <div class="panel sidebar_section">\n      <div class=panel-heading role=tab id=heading{{$index}}>\n        <h4 class=panel-title>\n          <a role=button data-toggle=collapse data-target=#collapsePints>\n            Points\n          </a>\n        </h4>\n      </div>\n      <div id=collapsePints class="panel-collapse collapse" role=tabpanel aria-labelledby=heading{{$index}}>\n        <div class=panel-body>\n          <form class=form-group>\n            <pre>\n              {{validator | json}}\n            </pre>\n            <pre>\n              {{options | json}}\n            </pre>\n            <div ng-repeat="item in options track by $index">\n              <label class="control-label truncate col-sm-6" for=pwd>{{item.text}}:</label>\n              <div class=col-sm-6>\n                <input type=number class=form-control ng-model=item.value placeholder=0 validator="[totalPoints, number]" validator-group=options>\n              </div>\n            </div>\n            <div class=form-group>\n              <div class="col-sm-offset-6 col-sm-6">\n                <button type=submit class="btn btn-primary" ng-click=submit()>Save</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n  <hr>\n  <div class=form-group>\n    <input type=submit ng-click=duplicate() class="btn btn-primary" value=Duplicate>\n    <input type=button ng-click=cancel() class="btn btn-default" value=Cancel>\n    <input type=button ng-click=remove() class="btn btn-danger" value=Delete>\n  </div>\n</form>'),e.put("app/components/builder/templates/editable_components/radio.html",'<form><div class=form-group><label class=control-label>Label</label><input type=text ng-model=label validator=[required] class=form-control></div><div class=form-group><label class=control-label>Description</label><input type=text ng-model=description class=form-control></div><div class=form-group><label class=control-label>Options</label><textarea class=form-control rows=3 ng-model=optionsText>\n  </div>\n  <hr>\n  <div class="df-accordeon panel-group" id=accordion role=tablist aria-multiselectable=true>\n    <div class="panel sidebar_section">\n      <div class=panel-heading role=tab id=heading{{$index}}>\n        <h4 class=panel-title>\n          <a role=button data-toggle=collapse data-target=#collapsePoints>\n            Points\n          </a>\n        </h4>\n      </div>\n      <div id=collapsePoints class="panel-collapse collapse" role=tabpanel aria-labelledby=heading{{$index}}>\n        <div class=panel-body>\n          <ng-form class="form-group points-form">\n            <div ng-repeat="item in options track by $index">\n              <div class=form-block>\n                <label class="control-label truncate col-sm-12" for=pwd>{{item.text}}:</label>\n                <div class=col-sm-12>\n                  <input type=number class=form-control ng-model=item.value placeholder=0 validator=[maxPointsInOption] validator-group=options>\n                </div>\n              </div>\n            </div>\n            <div class=form-group>\n              <div class="col-sm-offset-5 col-sm-7">\n                <button type=submit class="btn btn-block btn-primary" ng-click=submitPoints(options)>Save</button>\n              </div>\n            </div>\n          </ng-form>\n        </div>\n      </div>\n    </div>\n    <div class="panel sidebar_section" ng-if=activatorsFormObjects.length>\n      <div class=panel-heading role=tab id=heading{{$index}}>\n        <h4 class=panel-title>\n          <a role=button data-toggle=collapse data-target=#collapseDependency>\n            Dependency\n          </a>\n        </h4>\n      </div>\n      <div id=collapseDependency class="panel-collapse collapse" ng-class=\'{ "in": $parent.colapseDependency }\' role=tabpanel aria-labelledby=heading{{$index}}>\n        <div class=panel-body>\n          <ng-form>\n            <div class=form-group>\n              <div class="col-sm-offset-5 col-sm-7">\n                <label>\n                  <input type=checkbox ng-model=\'dependentFrom["active"]\'> show if the answer is\n                </label>\n              </div>\n            </div>\n            <div class=form-group>\n              <label class="control-label truncate col-sm-5">select question:</label>\n              <div class=col-sm-7>\n                <select ng-disabled=\'!dependentFrom["active"]\' ng-model=\'dependentFrom["formObjectKey"]\' class=form-control ng-options="fo.key as fo.label group by fo.page for fo in activatorsFormObjects">\n                  <option value=""><i>-Select dependency-</i></option>\n                </select>\n              </div>\n            </div>\n            <div class=form-group>\n              <label class="control-label truncate col-sm-5">select answer:</label>\n              <div class=col-sm-7>\n                <select ng-disabled=\'!dependentFrom["formObjectKey"]\' ng-model=\'dependentFrom["formAnswerKey"]\' class=form-control ng-options="o.key as o.text for o in dependencyOptions">\n                  <option value=""><i>-Select option-</i></option>\n                </select>\n              </div>\n            </div>\n          </ng-form>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=form-group>\n    <input type=submit ng-click=duplicate() class="btn btn-primary" value=Duplicate>\n    <input type=button ng-click=cancel() class="btn btn-default" value=Cancel>\n    <input type=button ng-click=remove() class="btn btn-danger" value=Delete>\n  </div>\n</form>'),e.put("app/components/builder/templates/editable_components/select.html",'<form><div class=form-group><label class=control-label>Label</label><input type=text ng-model=label validator=[required] class=form-control></div><div class=form-group><label class=control-label>Description</label><input type=text ng-model=description class=form-control></div><div class=form-group><label class=control-label>Options</label><textarea class=form-control rows=3 ng-model=optionsText>\n  </div>\n  <hr>\n  <div class="df-accordeon panel-group" id=accordion role=tablist aria-multiselectable=true>\n    <div class="panel sidebar_section">\n      <div class=panel-heading role=tab id=heading{{$index}}>\n        <h4 class=panel-title>\n          <a role=button data-toggle=collapse data-target=#collapsePints>\n            Points\n          </a>\n        </h4>\n      </div>\n      <div id=collapsePints class="panel-collapse collapse" role=tabpanel aria-labelledby=heading{{$index}}>\n        <div class=panel-body>\n          <form>\n            <div class=form-group ng-repeat="item in options track by $index">\n              <label class="control-label truncate col-sm-5" for=pwd>{{item.text}}:</label>\n              <div class=col-sm-7>\n                <input type=text class=form-control ng-model=item.value placeholder=0>\n              </div>\n            </div>\n            <div class=form-group>\n              <div class="col-sm-offset-5 col-sm-7">\n                <button type=submit class="btn btn-primary">Save</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n    <div class="panel sidebar_section">\n      <div class=panel-heading role=tab id=heading{{$index}}>\n        <h4 class=panel-title>\n          <a role=button data-toggle=collapse data-target=#collapseDependency>\n            Dependency\n          </a>\n        </h4>\n      </div>\n      <div id=collapseDependency class="panel-collapse collapse" role=tabpanel aria-labelledby=heading{{$index}}>\n        <div class=panel-body>\n          <ng-form>\n            <div class=form-group ng-repeat="item in options track by $index">\n              <div class=checkbox>\n                <div class=col-sm-5>\n                  <label>\n                    <input name={{formName+index}} ng-model=$parent.addDependency[$index] validator-group={{formName}} value={{item}} type=checkbox ng-change="$parent.dependency[$index] = undefined">{{item.text}}\n                  </label>\n                </div>\n                <div class=col-sm-7>\n                  <select ng-disabled=!$parent.addDependency[$index] ng-model=$parent.dependency[$index] class=form-control ng-options="fo.key as fo.label group by fo.page for fo in allFormObjects">\n                    <option value=""><i>-Select dependency-</i></option>\n                  </select>\n                </div>\n              </div>\n              </div>\n            </ng-form></div>\n          </div></div></div></form>\n        \n      \n    \n  \n  <div class=form-group>\n    <input type=submit ng-click=duplicate() class="btn btn-primary" value=Duplicate>\n    <input type=button ng-click=cancel() class="btn btn-default" value=Cancel>\n    <input type=button ng-click=remove() class="btn btn-danger" value=Delete>\n  </div>'),e.put("app/components/builder/templates/editable_components/textArea.html",'<form><div class=form-group><label class=control-label>Label</label><input type=text ng-model=label validator=[required] class=form-control></div><div class=form-group><label class=control-label>Description</label><input type=text ng-model=description class=form-control></div><div class=form-group><label class=control-label>Placeholder</label><input type=text ng-model=placeholder class=form-control></div><div class=checkbox><label><input type=checkbox ng-model=required>Required</label></div><hr><div class=form-group><input type=submit ng-click=duplicate() class="btn btn-primary" value=Duplicate> <input type=button ng-click=cancel() class="btn btn-default" value=Cancel> <input type=button ng-click=remove() class="btn btn-danger" value=Delete></div></form>'),e.put("app/components/builder/templates/editable_components/textInput.html",'<form><div class=form-group><label class=control-label>Label</label><input type=text ng-model=label validator=[required] class=form-control></div><div class=form-group><label class=control-label>Description</label><input type=text ng-model=description class=form-control></div><div class=form-group><label class=control-label>Placeholder</label><input type=text ng-model=placeholder class=form-control></div><div class=checkbox><label><input type=checkbox ng-model=required>Required</label></div><div class=form-group ng-if="validationOptions.length > 0"><label class=control-label>Validation</label><select ng-model=$parent.validation class=form-control ng-options="option.rule as option.label for option in validationOptions"></select></div><hr><div class=form-group><input type=submit ng-click=duplicate() class="btn btn-primary" value=Duplicate> <input type=button ng-click=cancel() class="btn btn-default" value=Cancel> <input type=button ng-click=remove() class="btn btn-danger" value=Delete></div></form>'),e.put("app/components/builder/templates/form_objects/checkbox.html",'<div class=form-group><label for={{formName+index}} class="col-sm-4 control-label" ng-class="{\'df-required\':required}">{{label}}</label><div class=col-sm-8><input type=hidden ng-model=inputText validator-required={{required}} validator-group={{formName}}><div class=checkbox ng-repeat="item in options track by $index"><label><input type=checkbox ng-model=$parent.inputArray[$index] ng-true-value=\'"{{item.key}}"\' ng-false-value=false> {{item.text}}</label></div><p class=help-block>{{description}}</p></div></div>'),e.put("app/components/builder/templates/form_objects/radio.html",'<div class=form-group><label for={{formName+index}} class="col-sm-4 control-label" ng-class="{\'df-required\':required}">{{label}}</label><div class=col-sm-8><div class=radio ng-repeat="item in options track by $index"><label><input name={{formName+index}} ng-model=$parent.inputText validator-group={{formName}} value={{item.key}} type=radio> {{item.text}}</label></div><p class=help-block>{{description}}</p></div></div>'),e.put("app/components/builder/templates/form_objects/select.html",'<div class=form-group><label for={{formName+index}} class="col-sm-4 control-label">{{label}}</label><div class=col-sm-8><select ng-options="value.key as value.text for value in options" id={{formName+index}} class=form-control ng-model=inputText ng-init="inputText = inputText || options[0]"><option value="">-<option></option></option></select><p class=help-block>{{description}}</p></div></div>'),e.put("app/components/builder/templates/form_objects/textArea.html",'<div class=form-group><label for={{formName+index}} class="col-sm-4 control-label" ng-class="{\'df-required\':required}">{{label}}</label><div class=col-sm-8><textarea type=text ng-model=inputText validator-required={{required}} validator-group={{formName}} id={{formName+index}} class=form-control rows=6 placeholder={{placeholder}}>\n    <p class=help-block>{{description}}</p>\n  </div>\n</div>'),e.put("app/components/builder/templates/form_objects/textInput.html",'<div class=form-group><label for={{formName+index}} class="col-sm-4 control-label" ng-class="{\'df-required\':required}">{{label}}</label><div class=col-sm-8><input type=text ng-model=inputText validator-required={{required}} validator-group={{formName}} id={{formName+index}} class=form-control placeholder={{placeholder}}><p class=help-block>{{description}}</p></div></div>')}]);
//# sourceMappingURL=../maps/scripts/examples-bundler-2b4f28a783.js.map
